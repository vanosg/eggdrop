dist: xenial

addons:
    apt:
        packages:
            - tcl-dev
            - openssl
            - bats
            - libssl-dev 
            - zlib1g-dev
            - procps
            - netcat
            - bats
            - tar
            - telnet
language: C

#services:
#    - docker

compiler:
    - gcc

before_install:
    - git clone https://github.com/eggheads/eggdrop-tests.git
#    - docker build https://github.com/eggheads/eggdrop-docker.git#master:develop

script: 
#    - ./configure && make config && make && make install && make test
    - bats eggdrop-tests/eggdrop_compile_configure.bats
    - bats eggdrop-tests/eggdrop_compile_make.bats
    - bats eggdrop-tests/eggdrop_compile_testrun.bats
#    - echo travis:$foop | sudo chpasswd
#    - sudo sed -i 's/ChallengeResponseAuthentication no/ChallengeResponseAuthentication yes/' /etc/ssh/sshd_config
#    - sudo service ssh restart
#    - sudo apt-get install sshpass
#    - sshpass -p $foop ssh -R 9999:localhost:22 -o StrictHostKeyChecking=no travis@$bouncehostip
